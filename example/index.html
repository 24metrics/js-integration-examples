<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>
<body>
  <button id="approve-btn">Approved</button>
  <button id="reject-btn">Rejected</button>
</body>
  <script>
    (function() {
      var script = document.createElement('script');
      script.src = 'https://cdn.fstrk.net/lib/index.js';
      script.async = true;
      script.onload = function() {
        ASP.trackClick({
          integrationID: 'k5w9md8rcx',
          fields: 'fingerprint'
        }).then(function(res) {
          if (!res || res.status !== 200) {
            console.log('invalid')
            return
          };

          // The default fields in the response is:
          // {
          //   reason: string;
          //   status: 'approved' | 'rejected'
          //   transaction_id
          // }
          const { fingerprint, transaction_id } = res.data;

          if (res.data.status === 'approved') {
            console.log('click is approved')
            const btn = document.getElementById('approve-btn');
            btn.onclick = function() {
              window.location.href = `https://google.com?tx=${transaction_id}&fingerprint=${fingerprint}`
            }
          }

          if (res.data.status === 'rejected') {
            console.log('click is rejected')
            const btn = document.getElementById('reject-btn');
            btn.onclick = function() {
              window.location.href = `https://google.com?tx=${transaction_id}&fingerprint=${fingerprint}`
            }
          }
        }).catch(function(error) {
          console.error('Error in trackClick:', error);
        });
      };
      document.head.appendChild(script);
    })();
  </script>
</html>
